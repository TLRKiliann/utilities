<h1 id="eveil-api">Eveil-API</h1>
<ul>
<li>Merci =&gt; pandoc API-CSV-DATA.md -o api-csv-data.html (en
console)</li>
</ul>
<hr />
<p>API Webflow =&gt; https://developers.webflow.com/reference</p>
<hr />
<style>
    pre {
        font-size: 1.0rem;
        background-color: #222;
        color: #00ff00;
            padding: 20px 10px;
            border-radius: 5px;
    }
</style>
<h2 id="récupérer-les-données-du-cms">1) Récupérer les Données du
CMS</h2>
<p>Utilisez la méthode GET de l’API pour récupérer les entrées du CMS
que vous souhaitez mettre à jour.</p>
<pre><code>const fetchCMSData = async () =&gt; {
    const response = await fetch(&#39;https://api.webflow.com/collections/{collection_id}/items&#39;, {
        headers: {
            &#39;Authorization&#39;: &#39;Bearer {your_access_token}&#39;,
            &#39;accept-version&#39;: &#39;1.0.0&#39;
        }
    });
    const data = await response.json();
    return data.items; // Retourne les éléments du CMS
};</code></pre>
<hr />
<h2 id="calculer-la-date">2) Calculer la Date</h2>
<p>Établissez une fonction pour calculer la nouvelle date. Vous pouvez
utiliser Date en JavaScript pour gérer cela.</p>
<pre><code>const calculateNewDates = (currentDate) =&gt; {
    const newDates = [];
    for (let i = 1; i &lt;= 8; i++) {
        // Ajoute 56 jours (8 semaines)
        const newDate = new Date(currentDate);
        newDate.setDate(currentDate.getDate() + 56);
        newDates.push(newDate.toISOString().split(&#39;T&#39;)[0]); // Format &#39;YYYY-MM-DD&#39;
    }
    return newDates;
};</code></pre>
<hr />
<h2 id="mettre-à-jour-le-cms">3) Mettre à Jour le CMS</h2>
<p>Utilisez la méthode PUT de l’API pour mettre à jour les
enregistrements avec les nouvelles dates.</p>
<pre><code>const updateCMSData = async (itemId, newDate) =&gt; {
    await fetch(`https://api.webflow.com/collections/{collection_id}/items/${itemId}`, {
        method: &#39;PUT&#39;,
        headers: {
            &#39;Authorization&#39;: &#39;Bearer {your_access_token}&#39;,
            &#39;Content-Type&#39;: &#39;application/json&#39;,
            &#39;accept-version&#39;: &#39;1.0.0&#39;
        },
        body: JSON.stringify({
            fields: {
                dateField: newDate // Remplacez `dateField` par le nom réel du champ de date
            }
        })
    });
};</code></pre>
<hr />
<h2 id="combiner-les-étapes">4) Combiner les Étapes</h2>
<p>Créez une fonction principale qui exécute l’ensemble du processus :
récupérer les données, calculer les nouvelles dates et mettre à jour le
CMS.</p>
<pre><code>const updateDatesInWebflow = async () =&gt; {
    const items = await fetchCMSData();
    const newDates = calculateNewDates(new Date());

    for (const item of items) {
        const newDate = newDates.shift(); // Récupère la première nouvelle date
        await updateCMSData(item._id, newDate);
    }
};

updateDatesInWebflow(); // Exécution de la mise à jour</code></pre>
<p>Pour automatiser ce script afin qu’il s’exécute toutes les 8
semaines, vous pouvez utiliser un service cron ou un gestionnaire de
tâches (comme Node.js avec node-cron) si vous hébergez ce script sur un
serveur.</p>
<hr />
<h2 id="ecrire-des-données-csv-en-python3">Ecrire des données CSV en
python3 :</h2>
<pre><code>import csv

# Données à écrire dans le fichier CSV
donnees = [
    [&quot;Nom du cours&quot;, &quot;Date&quot;, &quot;Heure&quot;, &quot;Durée&quot;],
    [&quot;Mathématiques&quot;, &quot;2025-11-20&quot;, &quot;09:00&quot;, &quot;1h&quot;],
    [&quot;Physique&quot;, &quot;2025-11-20&quot;, &quot;10:30&quot;, &quot;1h&quot;],
    [&quot;Chimie&quot;, &quot;2025-11-20&quot;, &quot;13:00&quot;, &quot;1h&quot;],
    [&quot;Biologie&quot;, &quot;2025-11-21&quot;, &quot;09:00&quot;, &quot;1h&quot;],
    [&quot;Histoire&quot;, &quot;2025-11-21&quot;, &quot;10:30&quot;, &quot;1h&quot;],
    [&quot;Géographie&quot;, &quot;2025-11-21&quot;, &quot;13:00&quot;, &quot;1h&quot;]
]

# Ouvrir ou créer le fichier CSV en mode écriture
with open(&#39;cours.csv&#39;, mode=&#39;w&#39;, newline=&#39;&#39;) as fichier_csv:
    writer = csv.writer(fichier_csv)

    # Écrire les données dans le fichier CSV
    writer.writerows(donnees)

print(&quot;Données écrites avec succès dans &#39;cours.csv&#39;.&quot;)</code></pre>
<p>Execute with: <code>python3 votre_script.py</code></p>
